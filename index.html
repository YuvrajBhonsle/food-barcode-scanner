<!DOCTYPE html>
<html>
<head>
  <title>FoodScanGenius</title>
</head>
<body>
  <h1>FoodScanGenius</h1>
  <p>Welcome! Select a barcode from the list or enter it manually:</p>
  <select id="barcodeSelect" onchange="checkBarcodeInput(this)">
    <option value="">Select Barcode</option>
  </select>
  <input type="text" id="manualBarcodeInput" placeholder="Enter Barcode" oninput="checkBarcodeInput(this)">
  <button onclick="getBarcodeDetails()">Analyze</button>

  <div id="status"></div>
  <div id="result"></div>
  <div id="navigation">
    <a href="aboutus.html">About Us</a>
    <a href="faq.html">FAQ</a>
    <a href="fsg.html">Why FoodScanGenius</a>
    <a href="foodchoice.html">Food Choices</a>  
  </div>

  <script>
    var barcodeInput = null;
    var barcodeOptions = [];

    // Load barcode options from the JSON file
    fetch('barcodes.json')
      .then(response => response.json())
      .then(data => {
        barcodeOptions = data.barcodes;
        populateBarcodeOptions();
      })
      .catch(error => {
        console.error('Error loading barcode options:', error);
        showStatusMessage('Error loading barcode options. Please try again later.', true);
      });

    function populateBarcodeOptions() {
      var barcodeSelect = document.getElementById("barcodeSelect");
      barcodeOptions.forEach(function(barcode) {
        var option = document.createElement("option");
        option.value = barcode;
        option.text = barcode;
        barcodeSelect.appendChild(option);
      });
    }

    function checkBarcodeInput(inputElement) {
      barcodeInput = inputElement.value;
    }

    function getBarcodeDetails() {
      if (barcodeInput && barcodeInput.length > 0) {
        // Show loading status
        showStatusMessage('Loading barcode details...', false);

        // Make API request and process the barcode details
        // ...

        console.log("Barcode selected: " + barcodeInput);
      } else {
        showStatusMessage('Please select or enter a valid barcode.', true);
        console.log("No barcode selected.");
      }
    }

    function showStatusMessage(message, isError) {
      var statusContainer = document.getElementById("status");
      statusContainer.textContent = message;
      statusContainer.style.color = isError ? "red" : "green";
    }
  </script>
</body>
</html>
